"use strict";(function(){angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"));function a(b){return["$rootScope","$window",function(c,l){var j=l[b]||(console.warn("This browser does not support Web Storage!"),{}),g={$default:function(m){for(var i in m){angular.isDefined(g[i])||(g[i]=m[i])}return g},$reset:function(m){for(var i in g){"$"===i[0]||delete g[i]}return g.$default(m)}},h,e;for(var f=0,d;f<j.length;f++){(d=j.key(f))&&"ngStorage-"===d.slice(0,10)&&(g[d.slice(10)]=angular.fromJson(j.getItem(d)))}h=angular.copy(g);c.$watch(function(){e||(e=setTimeout(function(){e=null;if(!angular.equals(g,h)){angular.forEach(g,function(n,m){angular.isDefined(n)&&"$"!==m[0]&&j.setItem("ngStorage-"+m,angular.toJson(n));delete h[m]});for(var i in h){j.removeItem("ngStorage-"+i)}h=angular.copy(g)}},100))});"localStorage"===b&&l.addEventListener&&l.addEventListener("storage",function(i){if("ngStorage-"===i.key.slice(0,10)){i.newValue?g[i.key.slice(10)]=angular.fromJson(i.newValue):delete g[i.key.slice(10)];h=angular.copy(g);c.$apply()}});return g}]}})();